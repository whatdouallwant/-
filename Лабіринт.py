from pygame import *


class GameSprite():
    def __init__(self, img, speed, x, y):
        self.img = transform.scale(image.load(img), (45,45))
        self.rect = self.img.get_rect()
        self.speed = speed
        self.rect.x = x
        self.rect.y = y

        self.move_left = False
        self.move_right = False
        self.move_up = False
        self.move_down = False
    
        self.direction = "right"

    def reset(self):
        window.blit(self.img, (self.rect.x, self.rect.y))

class Hero(GameSprite):
    def move(self):
        keys = key.get_pressed()
        if keys[K_d]:
            if self.rect.x < 1000:
                self.rect.x += self.speed
        if keys[K_a]:
            if self.rect.x > 10:
                self.rect.x -= self.speed
        if keys[K_w]:
            if self.rect.y > 10:
                self.rect.y -= self.speed
        if keys[K_s]:
            if self.rect.y < 700:
                self.rect.y += self.speed

class Wall():
    def __init__(self, x, y, width, height):
        self.img = Surface((width, height))
        self.img.fill((255, 255, 240))
        self.rect = self.img.get_rect()
        self.rect.x = x
        self.rect.y = y

    def draw(self):
        window.blit(self.img, (self.rect.x, self.rect.y))



class Enemy(GameSprite):
    def moves(self, start, end):
        if self.direction == "right":
            self.rect.x += 4
        if self.direction == "left":
            self.rect.x -= 4
        if self.rect.x >= end:
            self.direction = "left"
        if self.rect.x <= start:
            self.direction = "right"

width = 700
height = 500

window = display.set_mode((width, height))
display.set_caption("Лабіринт")
backgrond = transform.scale(image.load("The_realone.png"), (700, 500))
clock = time.Clock()
font.init()
win = font.Font(None, 90)

hero = Hero("sprite1.png", 4, 50, 50)
enemy = Enemy("sprite2.png", 3, 370, 300)
treasure = GameSprite("pngwing.com.png", 0, 625, 415)

mixer.init()
kick = mixer.Sound("Necessary.mp3")

map = '''
11111111111111000000000000000000000000000000000000000000000000003
10000000000011000000000000000000000000000000000000000000000000003
10000000000011000000000000000000000000000000000000000000000000003
10000000000011000000000000000000000000000000000000000000000000003
10000000000011000000000000000000000000000000000000000000000000003
100000000000111111111111111111111111111111111111111111111111111111113
100000000000111111111111111111111111111111111111111111111111111111113
100000000000000000000000000000000000000000000000000000000000000000013
100000000000000000000000000000000000000000000000000000000000000000013
100000000000000000000000000000000000000000000000000000000000000000013
100000000000000000000000000000000000000000000000000000000000000000013
100000000000000000000000000000000000000000000000000000000000000000013
100000000000000000000000000000000000000000000000000000000000000000013
100000000000000000000000000000000000000000000000000000000000000000013
100000000000000000000000000000000000000000000000000000000000000000013
100000000000000000000000000000000000000000000000000000000000000000013
111111111111110000000001111111111111111111111111111111111110000000013
111111111111110000000001111111111111111111111111111111111110000000013
100000000000110000000001100000000000000000000000000000000110000000013
100000000000110000000001100000000000000000000000000000000110000000013
100000000000110000000001100000000000000000000000000000000110000000013
100000000000110000000000000000000000000000000000000000000110000000013
100000000000110000000000000000000000000000000000000000000110000000013
100000000000110000000000000000000000000000000000000000000110000000013
100000000000110000000000000000000000000000000000000000000110000000013
100000000000110000000000000000000000000000000000000000000110000000013
100000000000110000000000000000000000000000000000000000000110000000013
100000000000110000000000000000000000000000000000000000000110000000013
100000000000110000000000000000000000000000000000000000000110000000013
100000000000110000000001111111111111000000000000000000000110000000013
100000000000110000000001111111111111000000000000000000000110000000013
100000000000110000000001100000000011000000000000000000000110000000013
100000000000110000000001100000000011000000000000000000000110000000013
100000000000110000000001100000000011000000000000000000000110000000013
100000000000110000000001100000000011000000000000000000000110000000013
100000000000000000000001100000000011000000000000000000000110000000013
100000000000000000000001100000000011000000000000000000000110000000013
100000000000000000000001100000000011000000000000000000000110000000013
100000000000000000000001100000000011000000000000000000000111111111113
100000000000000000000001100000000011000000000000000000000111111111113
100000000000000000000001100000000011000000000000000000000000000000003
100000000000000000000001100000000011000000000000000000000000000000003
100000000000000000000001100000000011000000000000000000000000000000003
100000000000000000000001100000000011000000000000000000000000003
10000000000011000000000110000000001100000000000000000000000000003
10000000000011000000000110000000001100000000000000000000000000003
10000000000011000000000110000000001100000000000000000000000000003
10000000000011000000000110000000001100000000000000000000000000003
10000000000011000000000110000000001100000000000000000000000000003
111111111111111111111111100000000011111111111111111111111111111111113



'''

walls = [
        Wall(150, 450, 10, 200),
        Wall(150, 0, 10, 300),
        Wall(300, 200, 10, 300),
        Wall(300, 0, 10, 80)


]
mixer.music.load("Necessary.mp3")
mixer.music.play()
game = True
while game:
    wall_x = 0
    wall_y = 0
    window.blit(backgrond, (0, 0)) 
    hero.reset()
    hero.move()
    enemy.reset()
    enemy.moves(365, 540)
    
    

    for i in map:
        if i == '1':
            wall = Wall(wall_x, wall_y, 12, 12)
            wall.draw()
            if(hero.rect.colliderect(wall.rect)):
                hero.rect.x = 50
                hero.rect.y = 50
            if (hero.rect.colliderect(enemy.rect)):
                hero.rect.x = 50
                hero.rect.y = 50

    

        wall_x += 10
        if i == '3':
            wall_y += 10
            wall_x = 0
    for wall in walls:
        pass
    for e in event.get():
        if e.type == QUIT:
            game = False
    treasure.reset()
    if (hero.rect.colliderect(treasure.rect)):
        window.blit(win.render("YOU WON!", True, (0,250,0)), (width / 2 - 150, height / 2 - 150))
        

    display.update()
    clock.tick(60)



